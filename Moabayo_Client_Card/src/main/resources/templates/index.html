<!DOCTYPE html>
<html lang="ko" data-theme="dark" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>N07-00 | 모으냥즈 카드 서비스 메인페이지</title>

<link rel="stylesheet" href="/css/card-landing.css" />
<!-- 애니메이션 버튼 팩 -->
<link rel="stylesheet" href="/css/btn-anim.css" />
<link rel="stylesheet" href="/css/ui-buttons.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
<link rel="icon" href="http://localhost:8810/images/cat.ico" type="image/x-icon" />
<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
<link rel="stylesheet" href="http://localhost:8810/css/header-footer.css" />
<script defer src="http://localhost:8810/js/token-exp-display.js"></script>
<script defer src="http://localhost:8810/js/common.js"></script>
<script defer src="http://localhost:8810/js/adminservice.js"></script>
<script defer src="http://localhost:8810/js/bankservice.js"></script>
<script defer src="http://localhost:8810/js/cardservice.js"></script>
<script defer src="http://localhost:8810/js/transactionservice.js"></script>
<link rel="stylesheet" href="http://localhost:8810/css/theme.css" />
<link rel="stylesheet" href="http://localhost:8810/css/toggle.css" />
<script defer src="http://localhost:8810/js/theme.js"></script>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="/css/card-grid.css" />
<script defer src="/js/card-grid.js"></script>

<link rel="stylesheet" href="/css/card-viz.css" />
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
<script defer src="/js/card-viz.js"></script>

</head>
<body>
	<div id="header"></div>

	<main class="card-landing">
		<!-- HERO -->
		<section class="hero" aria-label="카드 서비스 소개">
			<div class="hero-bg"></div>
			<div class="hero-inner">
				<div class="eyebrow">
					<span class="pill pill-event">기간 한정</span> <span class="pill pill-brand">모으냥즈 카드</span>
				</div>
				<h1 class="hero-title">
					이번 주, 나에게 딱 맞는<br /> <span>혜택 · 적립 · 구독</span> 카드
				</h1>
				<p class="hero-desc">소비패턴 인사이트를 바탕으로 카드 혜택을 빠르게 비교하고 선택해 보세요.</p>
				<div class="hero-ctas">
					<a href="#grid" class="mbtn mbtn--lg mbtn--primary is-pill">내 카드/상품 보기</a>
					<a href="#insights" class="mbtn mbtn--lg mbtn--outline is-pill">소비 인사이트</a>
				</div>
				<div class="hero-countdown">
					<strong id="dday" th:text="'D-' + ${summary.daysUntilBilling}">D-7</strong> <span>이벤트 종료까지</span>
				</div>
			</div>
		</section>

		<!-- KPIs -->
		<section class="kpis" aria-label="요약 지표">
			<div class="kpi">
				<div class="kpi-label">보유 카드</div>
				<div class="kpi-value" id="kpiCards" th:text="${summary.ownedCount} + '장'">0장</div>
				<div class="kpi-sub">본인 소유</div>
			</div>
			<div class="kpi">
				<div class="kpi-label">이번 달 결제</div>
				<div class="kpi-value" id="kpiSpend" th:text="'₩ ' + ${#numbers.formatInteger(summary.totalSpend, 0)}">₩ 0</div>
				<div class="kpi-sub">누적 금액</div>
			</div>
			<div class="kpi">
				<div class="kpi-label">적립/캐시백 예상</div>
				<div class="kpi-value" id="kpiReward" th:text="'₩ ' + ${#numbers.formatInteger(summary.expectedReward, 0)}">₩ 0</div>
				<div class="kpi-sub">예상 합계</div>
			</div>
			<div class="kpi">
				<div class="kpi-label">알림</div>
				<div class="kpi-value" id="kpiAlerts" th:text="${summary.alertsCount} + '건'">0건</div>
				<div class="kpi-sub">이번 주 주요 이슈</div>
			</div>
		</section>

		<!-- 본문 -->
		<section id="grid" class="feature-grid" aria-label="주요 기능">
			<!-- 보유 카드 -->
			<article class="app-card card--glow">
				<div class="head-row">
					<h3 class="title">보유 카드</h3>
					<span class="badge" id="ownedCountBadge" th:text="${summary.ownedCount} + '장'">0장</span>
				</div>
				<p class="desc">이용한도·결제일 현황을 한눈에.</p>
				<div class="viz-row">
					<!-- SVG 링 게이지 -->
					<div class="ring" th:attr="data-caption='결제일 D-' + ${summary.daysUntilBilling}">
						<svg viewBox="0 0 120 120">
							<circle class="track" cx="60" cy="60" r="52"></circle>
							<circle class="bar" cx="60" cy="60" r="52"></circle>
						</svg>
						<div class="ring-label">
							<span class="num" id="ringPct">-</span>%
						</div>
						<div class="ring-sub" id="ringCaption" th:text="'결제일 D-' + ${summary.daysUntilBilling}">결제일 D-7</div>
					</div>
					<ul class="bullets">
						<li>보유: <strong id="ownedCount" th:text="${summary.ownedCount} + '장'">0장</strong></li>
						<li>다음 결제일: <strong id="nextBilling">–</strong></li>
					</ul>
				</div>
				<button class="mbtn mbtn--sm mbtn--primary is-pill" data-go="N07-01">바로가기</button>
			</article>

			<!-- 카드 상품 전체 조회 -->
			<article class="app-card card--draw">
				<h3 class="title">카드 상품 전체 조회</h3>
				<p class="desc">브랜드/혜택별 필터로 빠르게 비교.</p>
				<div class="mosaic">
					<span class="chip">외식</span><span class="chip">교통</span><span class="chip">구독</span> <span class="chip">해외</span><span class="chip">편의점</span><span class="chip">주유</span>
				</div>
				<div class="mini-chart">
					<canvas id="barCatalog"></canvas>
				</div>
				<button class="mbtn mbtn--sm mbtn--outline is-pill" data-go="N08-01">전체 보기</button>
			</article>

			<!-- 카드 추천 서비스 -->
			<article class="app-card card--fill">
				<h3 class="title">카드 추천 서비스</h3>
				<p class="desc">소비패턴 기반 ML 추천.</p>
				<div class="mini-chart center">
					<canvas id="donutFit"></canvas>
					<div class="donut-center">
						<b id="fitScore">-</b>% <span>적합도</span>
					</div>
				</div>
				<div class="delta">
					<!-- 예시 데이터 없으므로 빈칸 유지 -->
				</div>
				<button class="mbtn mbtn--sm mbtn--soft is-pill" data-go="N09-01">추천 받기</button>
			</article>

			<!-- 혜택 캘린더 -->
			<article class="app-card card--flip">
				<div class="flip-wrap">
					<div class="front">
						<h3 class="title">혜택 캘린더</h3>
						<p class="desc">이번 주 행사 강도</p>
						<div class="mini-chart">
							<canvas id="barCalendar"></canvas>
						</div>
						<p class="hint">강할수록 진한 색</p>
					</div>
					<div class="back">
						<ul class="bullets tight" th:each="event : ${summary.weeklyEvents}">
							<li th:text="${event.date} + ' ' + ${event.description}"></li>
						</ul>
						<button class="mbtn mbtn--sm mbtn--primary is-pill" data-go="N08-01">행사 보기</button>
					</div>
				</div>
			</article>

			<!-- 알림/보안 -->
			<article class="app-card card--soft">
				<div class="pulse-icon">
					<div class="dot"></div>
				</div>
				<h3 class="title">알림 & 보안</h3>
				<ul class="bullets tight" id="alertsList" th:each="alert : ${summary.alerts}">
					<li th:text="${alert}">이번 주 해외 승인 1건</li>
				</ul>
				<button class="mbtn mbtn--sm mbtn--outline is-pill" data-go="N07-01">자세히</button>
			</article>

			<!-- 포인트/적립 -->
			<article class="app-card card--lift">
				<h3 class="title">포인트/적립</h3>
				<p class="desc">현재 포인트 & 최근 추이</p>
				<div class="big-num">
					<span id="pointNow">0</span> P
				</div>
				<div class="mini-chart">
					<canvas id="sparkPoints"></canvas>
				</div>
				<button class="mbtn mbtn--sm mbtn--outline is-pill" data-go="N07-01">적립 내역</button>
			</article>
		</section>

		<section id="insights" class="banner">
			<strong th:text="${summary.insightTitle}">점심(11–14) 외식 비중이 높아요</strong>
			<p th:text="${summary.insightDescription}">점심 적립형 ‘야식냥 체크카드’가 잘 맞습니다. 이번 주 추가 적립 이벤트 진행 중!</p>
		</section>
	</main>

	<div id="footer"></div>
</body>
</html>
